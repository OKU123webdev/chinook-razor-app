@page
@model WebApp.Pages.Delete

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Delete Album</title>
        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

        <!-- CONFIRM DELETE ALERT -->
        <script>
            function confirmDelete() {
                return confirm("You are about to delete this Album, are you sure?")
            }
        </script>
    </head>

    <body style="padding: 2%;">
        <!-- HEADING -->
        <h1 class="display-5">Delete Album</h1>
        <!-- RETURN TO INDEX -->
        <p><a href="/">Return to homepage</a></p>

        <!-- ..................  DELETE BUTTON ......................  -->
        <!-- Confirm Delete -->
        <p>Are you sure you want to delete this album? You can delete an indivual track indivual the Details page.</p>

        <!-- DELETE FORM -->
        <form method="post" onsubmit="return confirmDelete();">
            @Html.AntiForgeryToken()
            <input type="hidden" name="albumId" value="@Model.AlbumId">
            <input type="submit" value="DELETE THIS ALBUM" class="btn btn-outline-dark m-3">
        </form>


        <!-- ................... ALBUM DETAILS ....................... -->
        <!-- Show Album Title/Artist Name -->
        <h2 class="display-6">@Model.AlbumTitle (@Model.ArtistName)</h2>

        <!-- ................... TRACK DETAILS TABLE ....................... -->
        <table class="table table-info table-striped my-table mx-auto" border="1" style="text-align:center;">
            <!-- Table Headings  -->
            <tr>
                <th>#</th>
                <th>Track Name</th>
                <th>Genre</th>
                <th>Composer</th>
            </tr>

            <!-- Check for tracks in album -->
            @if (Model.TrackDetail != null && Model.TrackDetail.Any())
            {
                int trackNumber = 1;
                @* Get track details form database  *@
                @foreach (TrackDetails trackDetails in Model.TrackDetail)
                {
                     @* Table Rows  *@
                    <tr>
                        <td>@trackNumber.</td>
                        <td>@trackDetails.TrackName</td>
                        <td>@trackDetails.GenreName</td>
                        <td>@trackDetails.Composer</td>
                    </tr>
                    @* Increment track number *@
                    trackNumber++;
                }
            }
            @* No tracks found *@
            else
            {
                <p>No tracks avaliable form this album</p>
            }

        </table>

        <!-- Bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous">
        </script>
    </body>

</html>